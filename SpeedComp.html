<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Il-Youp Kwak" />


<title>Speed comaprison using R, awk and Perl</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>


<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%20code%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />

</head>

<body>



<div class="fluid-row" id="header">


<h1 class="title">Speed comaprison using R, awk and Perl</h1>
<h4 class="author"><em>Il-Youp Kwak</em></h4>
<h4 class="date"><em>2016-5-9</em></h4>

</div>


<p>In some of tutorials(<a href="http://www.tc.umn.edu/~ikwak/tutorials/CorrFromRef.html">T1</a>,<a href="http://www.tc.umn.edu/~ikwak/tutorials/ForMTgenes.html">T2</a>), I used <a href="http://www.grymoire.com/Unix/Awk.html">awk</a> because it is faster. Here I do some experiments how much it is faster. I compared five methods : 1) Old R functions, 2) <a href="https://github.com/hadley/dplyr">dplyr</a> and <a href="https://github.com/hadley/readr">readr</a> 3) <a href="https://github.com/Rdatatable/data.table/wiki">data.table</a> 4) <a href="http://www.grymoire.com/Unix/Awk.html">awk</a> and 5) <a href="https://www.perl.org/">perl</a>.</p>
<p><code>GinatdatAI.txt</code> file have multi trait GWAS summary statistics of 2719717 SNPs. The data have rs-id, chromosome, genomic coordinate, 18 of GWAS summary statistics and allele information. Part of data looks like this.</p>
<pre><code>bash-3.2$ head -n 3 GiantdatAl.txt
rs4747841 10 9918166 0.94 0.31 0.68 0.63 0.31 0.50 0.16 0.76 0.47 0.80 0.26 0.38 0.96 0.27 0.49 0.65 0.55 0.75 a g
rs4749917 10 9918296 0.94 0.31 0.68 0.63 0.31 0.50 0.16 0.75 0.47 0.80 0.26 0.38 0.96 0.27 0.49 0.65 0.55 0.75 t c
rs737656 10 98252982 0.70 0.28 0.25 0.27 0.28 0.67 0.25 0.59 0.70 0.74 0.94 0.29 0.34 0.49 0.54 0.35 0.97 0.38 a g
</code></pre>
<p>In our example, <a href="data/AGRN.txt">AGRN.txt</a> have 3 SNPs mapped. (Note : This is example file, in the real analysis 13 SNPs are mapped on <em>AGRN</em>).</p>
<pre><code>bash-3.2$ cat AGRN.txt
rs3121561
rs2799064
rs3128126</code></pre>
<p>We would like to take subset of <em>AGRN</em> from <code>GiantdatAl.txt</code>. It can be done using built in R functions.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## in R (Old)  ###
t1 &lt;-<span class="st"> </span><span class="kw">proc.time</span>()
dat1 &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="st">&quot;GiantdatAl.txt&quot;</span>, <span class="dt">colClasses=</span><span class="kw">c</span>(<span class="st">&quot;character&quot;</span>, <span class="st">&quot;character&quot;</span>,
               <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>,
               <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>,
               <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>,
               <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;character&quot;</span>, <span class="st">&quot;character&quot;</span>)  )
snps &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="st">&quot;AGRN.txt&quot;</span>, <span class="dt">header=</span><span class="ot">FALSE</span>)
sdat &lt;-<span class="st"> </span>dat1[ dat1[,<span class="dv">1</span>] %in%<span class="st"> </span>snps$V1, ]
t2 &lt;-<span class="st"> </span><span class="kw">proc.time</span>()</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sdat</code></pre></div>
<pre><code>##                V1 V2      V3   V4    V5   V6   V7   V8    V9  V10  V11  V12
## 1165433 rs2799064  1 1022518 0.76 0.580 0.32 0.18 0.66 0.610 0.72 0.31 0.87
## 1166049 rs3128126  1 1026830 0.53 0.076 0.83 0.12 0.94 0.081 0.67 0.39 0.59
## 1168776 rs3121561  1 1055000 0.45 0.380 0.78 0.14 0.73 0.012 0.40 0.11 0.98
##          V13  V14  V15  V16  V17  V18  V19  V20  V21 V22 V23
## 1165433 0.79 0.96 0.93 0.40 0.83 0.97 0.73 0.82 0.56   t   g
## 1166049 0.17 0.78 0.47 0.73 0.15 0.48 0.81 0.63 0.58   a   g
## 1168776 0.07 0.12 0.33 0.54 0.64 0.98 0.81 0.48 0.59   t   c</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">t2 -<span class="st"> </span>t1</code></pre></div>
<pre><code>##   user  system elapsed
## 29.053   0.935  30.175</code></pre>
<p>Now, I tried the same job using <a href="https://github.com/hadley/dplyr">dplyr</a> and <a href="https://github.com/hadley/readr">readr</a>. The packages are coded under C++ using Rcpp.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(readr)
<span class="kw">library</span>(dplyr)
### in R , using readr and dplyr ###

t1 &lt;-<span class="st"> </span><span class="kw">proc.time</span>()
dat1 &lt;-<span class="st"> </span><span class="kw">read_delim</span>(<span class="st">&quot;GiantdatAl.txt&quot;</span>, <span class="dt">delim=</span><span class="st">&quot; &quot;</span>, <span class="dt">col_type=</span><span class="kw">cols</span>(<span class="st">&quot;c&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;i&quot;</span>, <span class="st">&quot;d&quot;</span>,
                   <span class="st">&quot;d&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;d&quot;</span>,
                   <span class="st">&quot;d&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;c&quot;</span>), <span class="dt">col_names=</span><span class="ot">FALSE</span> )
snps &lt;-<span class="st"> </span><span class="kw">read_delim</span>(<span class="st">&quot;AGRN.txt&quot;</span>, <span class="dt">col_names=</span><span class="ot">FALSE</span>, <span class="dt">delim=</span> <span class="st">&quot; &quot;</span>)
sdat &lt;-<span class="st"> </span><span class="kw">filter</span>(dat1, X1 %in%<span class="st"> </span>snps$X1)
t2 &lt;-<span class="st"> </span><span class="kw">proc.time</span>()</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sdat</code></pre></div>
<pre><code>## Source: local data frame [3 x 23]
##
##          X1    X2      X3    X4    X5    X6    X7    X8    X9   X10   X11   X12
##       (chr) (chr)   (int) (dbl) (dbl) (dbl) (dbl) (dbl) (dbl) (dbl) (dbl) (dbl)
## 1 rs2799064     1 1022518  0.76 0.580  0.32  0.18  0.66 0.610  0.72  0.31  0.87
## 2 rs3128126     1 1026830  0.53 0.076  0.83  0.12  0.94 0.081  0.67  0.39  0.59
## 3 rs3121561     1 1055000  0.45 0.380  0.78  0.14  0.73 0.012  0.40  0.11  0.98
## Variables not shown: X13 (dbl), X14 (dbl), X15 (dbl), X16 (dbl), X17 (dbl), X18
##    (dbl), X19 (dbl), X20 (dbl), X21 (dbl), X22 (chr), X23 (chr)</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">t2 -<span class="st"> </span>t1</code></pre></div>
<pre><code>##   user  system elapsed
## 14.059   0.632  14.788</code></pre>
<p>Using <code>readr</code> and <code>dplyr</code> this data manipulation can be done about 2 times faster.</p>
<p>Let’s try <a href="https://github.com/Rdatatable/data.table/wiki">data.table</a> next. It is reported that <code>fread</code> function in <code>data.table</code> package is a bit faster since the function is coded using pure C.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(data.table)
### in R using data.table  ###

t1 &lt;-<span class="st"> </span><span class="kw">proc.time</span>()
dat1 &lt;-<span class="st"> </span><span class="kw">fread</span>(<span class="st">&quot;GiantdatAl.txt&quot;</span>, <span class="dt">colClasses=</span><span class="kw">c</span>(<span class="st">&quot;character&quot;</span>, <span class="st">&quot;character&quot;</span>, <span class="st">&quot;integer&quot;</span>,
              <span class="st">&quot;double&quot;</span>, <span class="st">&quot;double&quot;</span>, <span class="st">&quot;double&quot;</span>, <span class="st">&quot;double&quot;</span>, <span class="st">&quot;double&quot;</span>, <span class="st">&quot;double&quot;</span>, <span class="st">&quot;double&quot;</span>,
              <span class="st">&quot;double&quot;</span>, <span class="st">&quot;double&quot;</span>, <span class="st">&quot;double&quot;</span>, <span class="st">&quot;double&quot;</span>, <span class="st">&quot;double&quot;</span>, <span class="st">&quot;double&quot;</span>, <span class="st">&quot;double&quot;</span>,
              <span class="st">&quot;double&quot;</span>, <span class="st">&quot;double&quot;</span>, <span class="st">&quot;double&quot;</span>, <span class="st">&quot;double&quot;</span>, <span class="st">&quot;character&quot;</span>, <span class="st">&quot;character&quot;</span>)  )
snps &lt;-<span class="st"> </span><span class="kw">fread</span>(<span class="st">&quot;AGRN.txt&quot;</span>, <span class="dt">header=</span><span class="ot">FALSE</span>)
sdat &lt;-<span class="st"> </span>dat1[ V1 %in%<span class="st"> </span>snps$V1, ]
t2 &lt;-<span class="st"> </span><span class="kw">proc.time</span>()</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">t2 -<span class="st"> </span>t1</code></pre></div>
<pre><code>##   user  system elapsed
## 15.118   0.423  15.548</code></pre>
<p>For this particular data manipulation the speed is a bit slower or very similar to using <code>dplyr</code> and <code>readr</code>.</p>
<p>Next I used <code>awk</code> command for the same data manipulation.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">### using ask ####

t1 &lt;-<span class="st"> </span><span class="kw">proc.time</span>()
cmd2run &lt;-<span class="st"> &quot;awk 'NR==FNR {h[$1] = $1; next} h[$1] !=</span><span class="ch">\&quot;\&quot;</span><span class="st"> {print $0}' AGRN.txt GiantdatAl.txt &gt; exdat1.txt&quot;</span>
<span class="kw">system</span>(cmd2run)
sdat &lt;-<span class="st"> </span><span class="kw">fread</span>(<span class="st">&quot;exdat1.txt&quot;</span>, <span class="dt">colClasses=</span><span class="kw">c</span>(<span class="st">&quot;character&quot;</span>, <span class="st">&quot;character&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;character&quot;</span>, <span class="st">&quot;character&quot;</span>)  )
t2 &lt;-<span class="st"> </span><span class="kw">proc.time</span>()</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">t2 -<span class="st"> </span>t1</code></pre></div>
<pre><code>##  user  system elapsed
##  2.730   0.400   3.136</code></pre>
<p>Yes, it is super fast. It is more than 4 times faster then any other methods that I compared here.</p>
<p>Next one is using <code>perl</code>. I write a perl code, <a href="perl/TakeSubDat.pl">TakeSubDat.pl</a> for this.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">t1 &lt;-<span class="st"> </span><span class="kw">proc.time</span>()
cmd2run &lt;-<span class="st"> &quot;./TakeSubDat.pl AGRN.txt GiantdatAl.txt &gt; exdat2.txt&quot;</span>
<span class="kw">system</span>(cmd2run)
sdat &lt;-<span class="st"> </span><span class="kw">fread</span>(<span class="st">&quot;exdat2.txt&quot;</span>, <span class="dt">colClasses=</span><span class="kw">c</span>(<span class="st">&quot;character&quot;</span>, <span class="st">&quot;character&quot;</span>, <span class="st">&quot;numeric&quot;</span>,
              <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>,
              <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>,
              <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>,
              <span class="st">&quot;character&quot;</span>, <span class="st">&quot;character&quot;</span>)  )
t2 &lt;-<span class="st"> </span><span class="kw">proc.time</span>()</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">t2 -<span class="st"> </span>t1</code></pre></div>
<pre><code>##   user  system elapsed
## 33.550   0.350  33.935</code></pre>
<p>The speed using <code>perl</code> was similar with <code>old R</code>.</p>
<p>In conclusion, it would be good to use <code>dplyr</code> <code>readr</code> and <code>data.table</code> for plain data manipulation since they are easy to use (easier syntax). If speed matters, it would be good to write awk script. If you have better opinons and suggestions please e-mail me, <a href="mailto:ikwak@umn.edu">ikwak@umn.edu</a>. Thank you! :)</p>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
